{% extends "base.html" %}
{% block content %}
    <section class="container">
      <h1 class="large text-primary">
        Posts
      </h1>
      <p class="lead"><i class="fas fa-user"></i> Welcome to the community</p>

      <div class="post-form">
        <div class="post-form-header bg-primary">
          <h3>Say Something...</h3>
        </div>
        <form method="POST" action="{% url 'posts' %}" class="form my-1">
          {% csrf_token %}
          {{form.title}}
          {{form.body}}
          <input type="submit" value="Create" class="btn btn-dark my-1" />
        </form>
        <div class="posts">
          {% for post in posts %}
          <div class="post bg-white my-1 p-1">
            <div>
              <a href="{{ post.author.get_absolute_url }}">
                <img
                  class="round-img"
                  src="{{post.author.pfp.url}}"
                  alt=""
                />
                <h4>{{post.author.user.username}}</h4>
              </a>
            </div>

            <div>
              <p class="my-1">
                <h3>{{post.title}}</h3>
                <br>
                {{post.body}}
                <br><br>
              </p>
              <form action="{% url "like_post" post.slug %}" method='POST' style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn {% if post.user_liked %}btn-success{% endif %}">
                  <i class="fas fa-thumbs-up"> {{post.like.count}} </i>
                </button>
              </form>

              <form action="{% url "dislike_post" post.slug %}" method='POST' style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn {% if post.user_disliked %}btn-danger{% endif %}">
                  <i class="fas fa-thumbs-down"> {{post.dislike.count}} </i>
                </button>
              </form>

              <a href="{{ post.get_absolute_url }}" class="btn btn-primary">
                Discussion
              </a>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
    </section>
{% endblock %}