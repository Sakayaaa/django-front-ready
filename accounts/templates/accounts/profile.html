{% extends "base.html" %}
{% block content %}
    <section class="container">
      <a href="{% url "profiles" %}" class="btn">Back To Profiles</a>

      <div class="profile-grid my-1">
        <!-- Top -->
        <div class="profile-top bg-primary p-2">
          <img
            class="round-img my-1"
            src="{{ user_profile.pfp.url }}"
            alt=""
          />

          <h1 class="large">{{ user_profile.user.username }}</h1>
          <p class="lead">{{ user_profile.professional_status }}</p>
          <p>{{user_profile.location}}</p>
          <div class="icons my-1">
            {% if user_profile.website %}
              <a href="{{ user_profile.website }}" target="_blank">
                <i class="fas fa-globe fa-2x"></i>
              </a>
            {% endif %}

            {% if user_profile.facebook %}
              <a href="{{ user_profile.facebook }}" target="_blank">
                <i class="fab fa-facebook fa-2x"></i>
              </a>
            {% endif %}
            
            {% if user_profile.linkedin %}
              <a href="{{ user_profile.linkedin }}" target="_blank">
                <i class="fab fa-linkedin fa-2x"></i>
              </a>
            {% endif %}
            
            {% if user_profile.instagram %}
              <a href="{{ user_profile.instagram }}" target="_blank">
                <i class="fab fa-instagram fa-2x"></i>
              </a>
            {% endif %}
          </div>
        </div>
        <!-- About -->
        <div class="profile-about bg-light p-2">
          <h2 class="text-primary">{{ user_profile.user.username }}'s Bio</h2>
          <p>
            {{user_profile.bio}}
          </p>
          <div class="line"></div>
          <h2 class="text-primary">Skill Set</h2>
          <div class="skills">
            {% for skill in skills_list %}
            <div class="p-1"><i class="fas fa-check"></i> {{skill}} </div>
            {% endfor %}
          </div>
        </div>
        <!-- Experience -->
        <div class="profile-exp bg-white p-2">
          <h2 class="text-primary">Experiences</h2>
          {% for experience in experience_list %}
          <div>
            <h3>{{experience.company}}</h3>
            <p>
              {{experience.start_date|date:'F Y'}} -
              {% if experience.current %}
                Current
              {% else %}
                {{experience.end_date|date:'F Y'}}</p>
              {% endif %}
            <p><strong>Position: </strong> {{experience.job}}</p>
            <p>
              <strong>Description: </strong>
              {{experience.description}}
            </p>
          </div>
          {% endfor %}
        </div>
        <!-- Education -->
        <div class="profile-edu bg-white p-2">
          <h2 class="text-primary">Education</h2>
          {% for education in education_list %}
          <div>
            <h3>{{education.school}}</h3>
            <p>
              {{education.start_date}} -
              {% if education.end_date %}
                {{education.end_date}}
              {% else %}
                Present
              {% endif %}
            </p>
            <p><strong>Degree: </strong> {{education.degree}}</p>
            <p><strong>Field Of Study: </strong> {{education.field}}</p>
            <p>
              <strong>Description: </strong>
              {{education.description}}
            </p>
          </div>
          {% endfor %}
        </div>

<!-- Github Repos -->
{% if user_profile.github_username %}
  <div class="profile-github">
    <h2 class="text-primary my-1">
      <i class="fab fa-github"></i> Github Repos ({{ user_profile.github_username }})
    </h2>

    {% if github_repos %}
      {% for repo in github_repos %}
        <div class="repo bg-white my-1 p-1">
          <div>
            <h4>
              <a href="{{ repo.html_url }}" target="_blank">{{ repo.name }}</a>
            </h4>
            <p>{{ repo.description|default:"No description available." }}</p>
          </div>

          <div>
            <ul>
              <li class="badge badge-primary">Stars: {{ repo.stargazers_count }}</li>
              <li class="badge badge-dark">Watchers: {{ repo.watchers_count }}</li>
              <li class="badge badge-light">Forks: {{ repo.forks_count }}</li>
            </ul>
          </div>
        </div>
      {% endfor %}
    {% else %}
      <p>No repositories found for this user.</p>
    {% endif %}
  </div>
{% endif %}
      </div>
    </section>
{% endblock %}
