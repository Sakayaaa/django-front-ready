{% extends "base.html" %}
{% block content %}
    <section class="container">
      <h1 class="large text-primary">
        Dashboard
      </h1>
      <p class="lead"><i class="fas fa-user"></i> Welcome {{userprofile.user.username}}</p>
      <div class="dash-buttons">
        <a href="{% url "create_profile" %}" class="btn">
          <i class="fas fa-user-circle text-primary"></i> Edit Profile
        </a>
        <a href="{% url "add_experience" %}" class="btn">
          <i class="fab fa-black-tie text-primary"></i> Add Experience
        </a>
        <a href="{% url "add_education" %}" class="btn">
          <i class="fas fa-graduation-cap text-primary"></i> Add Education
        </a>
      </div>

      <h2 class="my-2">
        Experience Credentials
      </h2>
      <table class="table">
        <thead>
          <tr>
            <th>Company</th>
            <th class="hide-sm">Title</th>
            <th class="hide-sm">Years</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for experience in experience_list %}
            <tr>
              <td>{{experience.company}}</td>
              <td class="hide-sm">{{experience.job}}</td>
              <td class="hide-sm">
                {{experience.start_date|date:'F Y'}} -
                {% if experience.current %}
                  Current
                {% else %}
                  {{experience.end_date|date:'F Y'}}
                {% endif %}
              </td>
              <td>
                <form action="{% url "delete_experience" experience.id %}" method="POST"
                onsubmit="return confirm('Are you sure you want to delete this experience?');">
                  {% csrf_token %}
                  <button class="btn btn-danger">
                    Delete
                  </button>
                </form>
              </td>
              <td>
                <a href="{% url "edit_experience" experience.id %}">
                  <button type="button" class="btn btn-primary">
                    Edit
                  </button>
                </a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>

      <h2 class="my-2">
        Education Credentials
      </h2>
      <table class="table">
        <thead>
          <tr>
            <th>School</th>
            <th class="hide-sm">Degree</th>
            <th class="hide-sm">Years</th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for education in education_list %}
            <tr>
              <td>{{education.school}}</td>
              <td class="hide-sm">{{education.degree}}</td>
              <td class="hide-sm">
                {{education.start_date|date:'F Y'}} -
                {% if education.current %}
                  Current
                {% else %}
                  {{education.end_date|date:'F Y'}}
                {% endif %}
              </td>
              <td>
                <form action="{% url "delete_education" education.id %}" method="POST"
                onsubmit="return confirm('Are you sure you want to delete this education?');">
                  {% csrf_token %}
                  <button class="btn btn-danger">
                    Delete
                  </button>
                </form>
              </td>
              <td>
                <a href="{% url "edit_education" education.id %}">
                  <button type="button" class="btn btn-primary">
                    Edit
                  </button>
                </a>
              </td>
            </tr>
          {% endfor %}
          
        </tbody>
      </table>

      <div class="my-2">
        <form action="{% url 'delete_account' %}" method="POST" 
        onsubmit="return confirm('Are you sure you want to delete your account?');">
        {% csrf_token %}
          <button class="btn btn-danger">Delete My Account</button>
        </form>
      </div>
    </section>
{% endblock %}